<launch>
    <arg name="play" default="true"/>
    <arg name="simulator" default="true"/>
    <arg name="use_ground_truth" default="false"/>

    <group if="$(arg simulator)">
        <node name="simulator" pkg="hockey_cup" type="simulator.py" output="screen">
            <param name="use_ground_truth" value="$(arg use_ground_truth)"/>
        </node>
    </group>

    <group unless="$(arg simulator)">
        <node name="usb_camera" pkg="hockey_cup" type="usb_camera" output="screen"/>
    </group>

    <group unless="$(arg use_ground_truth)">
        <node name="bot_detector" pkg="hockey_cup" type="bot_detector.py" output="screen"/>
        <node name="ball_detector" pkg="hockey_cup" type="ball_detector.py" output="screen"/>
    </group>

    <include file="$(find hockey_cup)/launch/mbot.launch">
        <arg name="number" value="0"/>
        <arg name="simulator" value="$(arg simulator)"/>
    </include>
    <include file="$(find hockey_cup)/launch/mbot.launch">
        <arg name="number" value="1"/>
        <arg name="simulator" value="$(arg simulator)"/>
    </include>

    <node if="$(arg play)" name="game" pkg="hockey_cup" type="game.py" output="screen"/>

    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find hockey_cup)/config/rviz.rviz" output="screen"/>
</launch>